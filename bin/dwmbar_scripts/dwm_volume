#!/usr/bin/env bash
# get volume for dwm_bar
dwm_volume() {
    # Get amixer output for the default sink (usually 'Master')
    amixer_output=$(amixer get Master)

    # Extract mute status
    if echo "$amixer_output" | grep -q '\[off\]'; then
        mute=true
    else
        mute=false
    fi

    # Extract volume percentage (e.g., "70%")
    volume_percent=$(echo "$amixer_output" | grep -oP '\[\d+%]' | head -1 | tr -d '[]')

    # Device name is not directly available via amixer, so we'll simulate it
    # Replace this string with your actual device name if needed
    device_name="Analog Stereo"

    if [ "$mute" = true ]; then
        msg="ðŸ”‡ mute"
    else
        msg="ðŸ”Š ${volume_percent}"
    fi

    printf "%s" "$msg"
}

dwm_volume

